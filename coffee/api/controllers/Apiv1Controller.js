// Generated by CoffeeScript 1.6.2
(function() {
  var client, fs;

  fs = require("fs");

  client = require("capture/client");

  module.exports = {
    upload: function(req, res) {
      var type;

      type = req.files.image.type;
      return fs.readFile(req.files.image.path, function(err, data) {
        var result;

        if (!err) {
          result = ("data:" + type + ";base64,") + data.toString("base64");
          return res.view("pages/upload", {
            image: "\"" + result + "\""
          });
        }
      });
    },
    share: function(req, res) {
      return client.run(req.param("dna"), function(data) {
        return console.log(data);
      });
    },
    capture: function(req, res) {
      return res.view("pages/capture", {
        dna: req.param("dna")
      });
    }
  };

}).call(this);
