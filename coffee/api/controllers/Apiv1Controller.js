// Generated by CoffeeScript 1.6.2
(function() {
  var client, fs;

  fs = require("fs");

  client = require("capture/client");

  module.exports = {
    upload: function(req, res) {
      var type;

      type = req.files.image.type;
      return fs.readFile(req.files.image.path, function(err, data) {
        var result;

        if (!err) {
          result = ("data:" + type + ";base64,") + data.toString("base64");
          return res.view("pages/upload", {
            image: "\"" + result + "\""
          });
        } else {

        }
      });
    },
    share: function(req, res) {
      var myClient;

      myClient = new client(req.param("dna"));
      return myClient.run(function(data64) {
        var data;

        data = new Buffer(data64.toString(), 'base64');
        fs.writeFileSync('debug.png', data);
        return res.json({
          status: 'success'
        });
      });
    },
    capture: function(req, res) {
      return res.view("pages/capture");
    }
  };

}).call(this);
