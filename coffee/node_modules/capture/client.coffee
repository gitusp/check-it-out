childProcess = require 'child_process'
path = require 'path'
phantomjs = require 'phantomjs'

module.exports = run: (dna, callback) ->
	stream = childProcess.spawn phantomjs.path, [path.join __dirname, 'bridge.js']
	stream.stdin.write JSON.stringify(dna)
	stream.stdout.on 'data', (data) ->
		callback data
